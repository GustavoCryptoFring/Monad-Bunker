<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé≠ –ë–£–ù–ö–ï–†</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <header class="game-header">
            <h1>üé≠ –ë–£–ù–ö–ï–†</h1>
            <p>–ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏–≥—Ä–∞ –Ω–∞ –≤—ã–∂–∏–≤–∞–Ω–∏–µ</p>
            <div class="server-info">
                <span id="playerCount">0</span> –∏–≥—Ä–æ–∫–æ–≤ –æ–Ω–ª–∞–π–Ω
            </div>
        </header>

        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ -->
        <div class="screen" id="mainScreen">
            <div class="login-form">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ë—É–Ω–∫–µ—Ä!</h2>
                <p>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:</p>
                <input type="text" id="playerNameInput" placeholder="–í–∞—à–µ –∏–º—è" maxlength="20" autofocus>
                
                <div class="game-actions">
                    <button type="button" id="createGameBtn" class="room-btn primary">
                        üÜï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É
                    </button>
                    
                    <div class="join-game-section">
                        <p>–ò–ª–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç–µ—Å—å –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∏–≥—Ä–µ:</p>
                        <div class="join-room">
                            <input type="text" id="roomCodeInput" placeholder="–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã (6 —Å–∏–º–≤–æ–ª–æ–≤)" maxlength="6" style="text-transform: uppercase;">
                            <button type="button" id="joinGameBtn" class="room-btn">
                                üö™ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ª–æ–±–±–∏ -->
        <div class="screen" id="lobbyScreen" style="display: none;">
            <div class="room-setup">
                <h2>–õ–æ–±–±–∏ –∏–≥—Ä—ã</h2>
                
                <div class="room-info">
                    <div class="room-code-display">
                        <span>–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã: </span>
                        <span class="room-code" id="roomCodeDisplay">------</span>
                        <button class="copy-btn" id="copyRoomCodeBtn" onclick="copyRoomCode()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                    <div class="room-link">
                        <span>–°—Å—ã–ª–∫–∞: </span>
                        <span id="roomLinkDisplay">--</span>
                        <button class="copy-btn" id="copyRoomLinkBtn" onclick="copyRoomLink()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                </div>
                
                <!-- –°–µ–ª–µ–∫—Ç–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–≥—Ä–æ–∫–æ–≤ -->
                <div class="room-settings" id="maxPlayersSelector" style="display: none;">
                    <label>–ú–∞–∫—Å–∏–º—É–º –∏–≥—Ä–æ–∫–æ–≤: 
                        <select id="maxPlayersSelect" onchange="changeMaxPlayers()">
                            <option value="8" selected>8 –∏–≥—Ä–æ–∫–æ–≤</option>
                            <option value="12">12 –∏–≥—Ä–æ–∫–æ–≤</option>
                            <option value="16">16 –∏–≥—Ä–æ–∫–æ–≤</option>
                        </select>
                    </label>
                </div>
                
                <div class="players-waiting">
                    <h3>–ò–≥—Ä–æ–∫–∏ –≤ –ª–æ–±–±–∏ (<span id="currentPlayersCount">0</span>/<span id="maxPlayersCount">8</span>):</h3>
                    <ul id="playersList"></ul>
                </div>

                <div class="lobby-actions">
                    <button id="startGameBtn" class="start-game-btn" onclick="startGame()" style="display: none;" disabled>
                        –ù–∞—á–∞—Ç—å –∏–≥—Ä—É (–º–∏–Ω–∏–º—É–º 2 –∏–≥—Ä–æ–∫–∞)
                    </button>
                    
                    <button id="leaveRoomBtn" class="room-btn secondary" onclick="leaveRoom()">
                        üö™ –ü–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É
                    </button>
                </div>
                
                <div class="game-info" id="waitingInfo">
                    <p>‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ —Ö–æ—Å—Ç–∞ –¥–ª—è –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã...</p>
                </div>
            </div>
        </div>

        <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω (–æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) -->
        <div class="screen" id="gameScreen" style="display: none;">
            <div class="game-info">
                <div class="story-container">
                    <div class="story-block">
                        <span class="story-title">üìñ –ò—Å—Ç–æ—Ä–∏—è</span>
                        <div class="story-text" id="storyText"></div>
                    </div>
                </div>
                
                <div class="round-info">
                    <h2>–†–ê–£–ù–î <span id="currentRound">1</span></h2>
                    <div id="round-message-block" class="round-message-block"></div>
                    <p id="gameStatus">–û–∂–∏–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã...</p>
                    
                    <div class="round-actions" id="roundActions" style="display: none;">
                        <button id="startRoundBtn" class="center-action-btn" onclick="startRound()" style="display: none;">
                            üöÄ –ù–∞—á–∞—Ç—å —Ä–∞—É–Ω–¥
                        </button>
                        
                        <button id="skipDiscussionBtn" class="center-action-btn" onclick="voteToSkipDiscussion()" style="display: none;">
                            ‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ (<span id="skipVotesCount">0</span>/2)
                        </button>
                        
                        <button id="finishJustificationBtn" class="center-action-btn" onclick="finishJustification()" style="display: none;">
                            ‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–ø—Ä–∞–≤–¥–∞–Ω–∏–µ
                        </button>
                        
                        <button id="surrenderBtn" class="center-action-btn surrender-btn" onclick="surrender()" style="display: none;">
                            üè≥Ô∏è –°–¥–∞—Ç—å—Å—è
                        </button>
                    </div>
                </div>
                
                <div class="timer-info">
                    <div class="phase-display" id="phaseDisplay">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞</div>
                    <div class="timer-display" id="timerDisplay">0:00</div>
                </div>
            </div>
            
            <div class="players-grid" id="playersGrid">
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –∏–≥—Ä–æ–∫–æ–≤ -->
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) -->
        <div class="screen" id="resultsScreen" style="display: none;">
            <div class="room-setup">
                <h2>üèÜ –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h2>
                <div id="winnersSection">
                    <h3>–ü–æ–±–µ–¥–∏—Ç–µ–ª–∏:</h3>
                    <ul id="winnersList"></ul>
                </div>
                <div class="game-info">
                    <p>–ò–≥—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥...</p>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ (–æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) -->
        <div id="characteristicModal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è</h3>
                <div id="characteristicOptions" class="modal-buttons">
                    <!-- –û–ø—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
                <button onclick="closeCharacteristicModal()" class="room-btn secondary">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>

        <div id="confirmRevealModal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>–†–∞—Å–∫—Ä—ã—Ç–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>
                <p>–í—ã —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç–µ:</p>
                <div class="reveal-confirmation">
                    <strong id="confirmCharacteristicName"></strong>: <span id="confirmCharacteristicValue"></span>
                </div>
                <div class="reveal-progress" id="revealProgress"></div>
                <div class="modal-actions">
                    <button onclick="confirmReveal()" class="room-btn confirm-btn">‚úÖ –†–∞—Å–∫—Ä—ã—Ç—å</button>
                    <button onclick="cancelReveal()" class="room-btn secondary">‚ùå –û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <div id="notificationModal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3 id="notificationTitle">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</h3>
                <p id="notificationMessage"></p>
                <button onclick="closeNotificationModal()" class="room-btn">–û–ö</button>
            </div>
        </div>

        <div id="actionCardModal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>üéØ –ö–∞—Ä—Ç–∞ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                <div class="action-card-display">
                    <div class="action-card-name" id="actionCardName"></div>
                    <div class="action-card-description" id="actionCardDescription"></div>
                    <div class="action-card-uses" id="actionCardUses"></div>
                </div>
                <div class="modal-actions">
                    <button onclick="useActionCard()" class="room-btn confirm-btn" id="useActionCardBtn">
                        ‚ú® –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
                    </button>
                    <button onclick="closeActionCardModal()" class="room-btn secondary">
                        ‚ùå –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
</body>
</html>