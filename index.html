<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé≠ –ë–£–ù–ö–ï–†</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <header class="game-header">
            <h1>üé≠ –ë–£–ù–ö–ï–†</h1>
            <p>–û–±—â–∞—è –∏–≥—Ä–∞ –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</p>
            <div class="server-info">
                <span id="playerCount">0</span> –∏–≥—Ä–æ–∫–æ–≤ –æ–Ω–ª–∞–π–Ω
            </div>
        </header>

        <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ -->
        <div class="screen" id="loginScreen">
            <div class="login-form">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ë—É–Ω–∫–µ—Ä!</h2>
                <p>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è –¥–ª—è –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –æ–±—â–µ–π –∏–≥—Ä–µ:</p>
                <input type="text" id="playerNameInput" placeholder="–í–∞—à–µ –∏–º—è" maxlength="20" autofocus>
                <button id="joinGameBtn" class="room-btn">
                    –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∏–≥—Ä–µ
                </button>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ª–æ–±–±–∏ -->
        <div class="screen" id="lobbyScreen" style="display: none;">
            <div class="room-setup">
                <h2>–õ–æ–±–±–∏ –∏–≥—Ä—ã</h2>
                
                <!-- –î–û–ë–ê–í–ò–õ–ò —Å–µ–ª–µ–∫—Ç–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–≥—Ä–æ–∫–æ–≤ -->
                <div class="room-settings" id="maxPlayersSelector" style="display: none;">
                    <label>–ú–∞–∫—Å–∏–º—É–º –∏–≥—Ä–æ–∫–æ–≤: 
                        <select id="maxPlayersSelect" onchange="changeMaxPlayers()">
                            <option value="8" selected>8 –∏–≥—Ä–æ–∫–æ–≤</option>
                            <option value="12">12 –∏–≥—Ä–æ–∫–æ–≤</option>
                            <option value="16">16 –∏–≥—Ä–æ–∫–æ–≤</option>
                        </select>
                    </label>
                </div>
                
                <div class="players-waiting">
                    <h3>–ò–≥—Ä–æ–∫–∏ –≤ –ª–æ–±–±–∏ (<span id="currentPlayersCount">0</span>/<span id="maxPlayersCount">12</span>):</h3>
                    <ul id="playersList"></ul>
                </div>

                <!-- –ù–û–í–ê–Ø –°–¢–†–£–ö–¢–£–†–ê: –∫–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ä—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ -->
                <div class="lobby-actions">
                    <button id="startGameBtn" class="start-game-btn" onclick="startGame()" style="display: none;" disabled>
                        –ù–∞—á–∞—Ç—å –∏–≥—Ä—É (–º–∏–Ω–∏–º—É–º 2 –∏–≥—Ä–æ–∫–∞)
                    </button>
                    
                    <!-- –£–ë–ò–†–ê–ï–ú –∫–Ω–æ–ø–∫—É –Ω–∞—Å—Ç—Ä–æ–µ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
                </div>
                
                <!-- –£–ë–ò–†–ê–ï–ú –≤—Å—é –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
                
                <div class="game-info" id="waitingInfo">
                    <p>‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ —Ö–æ—Å—Ç–∞ –¥–ª—è –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã...</p>
                </div>
            </div>
        </div>

        <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
        <div class="screen" id="gameScreen" style="display: none;">
            <div class="game-info">
                <div class="round-info">
                    <h2>–†–ê–£–ù–î <span id="currentRound">1</span></h2>
                    <p id="gameStatus">–û–∂–∏–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã...</p>
                    
                    <!-- –¶–ï–ù–¢–†–ê–õ–¨–ù–´–ô –ö–û–ù–¢–ï–ù–¢: –ò—Å—Ç–æ—Ä–∏—è —Å–ª–µ–≤–∞ + –∫–Ω–æ–ø–∫–∏ —Å–ø—Ä–∞–≤–∞ -->
                    <div class="center-content">
                        <!-- –ü–ê–ù–ï–õ–¨ –° –ò–°–¢–û–†–ò–ï–ô - –ü–ï–†–í–ê–Ø (—Å–∞–º–∞—è –ª–µ–≤–∞—è) -->
                        <div class="story-panel" id="storyPanel" style="display: none;">
                            <div class="story-header">
                                <h3>üìú –ò—Å—Ç–æ—Ä–∏—è</h3>
                            </div>
                            <div class="story-content" id="storyContent">
                                <div class="story-loading">
                                    –û–∂–∏–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã...
                                </div>
                            </div>
                        </div>
                        
                        <!-- –ö–ù–û–ü–ö–ò –î–ï–ô–°–¢–í–ò–ô - –í–¢–û–†–´–ï -->
                        <div class="round-actions" id="roundActions" style="display: none;">
                            <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞—á–∞–ª–∞ —Ä–∞—É–Ω–¥–∞ (–¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤) -->
                            <button id="startRoundBtn" class="center-action-btn" onclick="startRound()" style="display: none;">
                                üöÄ –ù–∞—á–∞—Ç—å —Ä–∞—É–Ω–¥
                            </button>
                            
                            <!-- –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞ –æ–±—Å—É–∂–¥–µ–Ω–∏—è -->
                            <button id="skipDiscussionBtn" class="center-action-btn" onclick="voteToSkipDiscussion()" style="display: none;">
                                ‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ (<span id="skipVotesCount">0</span>/2)
                            </button>
                            
                            <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø—Ä–∞–≤–¥–∞–Ω–∏—è -->
                            <button id="finishJustificationBtn" class="center-action-btn" onclick="finishJustification()" style="display: none;">
                                ‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–ø—Ä–∞–≤–¥–∞–Ω–∏–µ
                            </button>
                            
                            <!-- –ö–Ω–æ–ø–∫–∞ —Å–¥–∞—á–∏ -->
                            <button id="surrenderBtn" class="center-action-btn surrender-btn" onclick="surrender()" style="display: none;">
                                üè≥Ô∏è –°–¥–∞—Ç—å—Å—è
                            </button>
                        </div>
                    </div>
                </div>
                <div class="timer-info">
                    <div class="phase-display" id="phaseDisplay">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞</div>
                    <div class="timer-display" id="timerDisplay">0:00</div>
                </div>
            </div>
            
            <!-- –°–ï–¢–ö–ê –ò–ì–†–û–ö–û–í - –û–¢–î–ï–õ–¨–ù–´–ú –ë–õ–û–ö–û–ú –°–ù–ò–ó–£ -->
            <div class="players-grid" id="playersGrid">
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –∏–≥—Ä–æ–∫–æ–≤ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>

            <div class="game-actions" id="gameActions">
                <!-- –†–µ–∑–µ—Ä–≤ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π -->
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        <div class="screen" id="resultsScreen" style="display: none;">
            <div class="room-setup">
                <h2>üèÜ –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h2>
                <div id="winnersSection">
                    <h3>–ü–æ–±–µ–¥–∏—Ç–µ–ª–∏:</h3>
                    <ul id="winnersList"></ul>
                </div>
                <div class="game-info">
                    <p>–ò–≥—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥...</p>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
        <div id="characteristicModal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è</h3>
                <div id="characteristicOptions" class="modal-buttons">
                    <!-- –û–ø—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
                <button onclick="closeCharacteristicModal()" class="room-btn secondary">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>

        <!-- –û–ë–ù–û–í–õ–ï–ù–ù–û–ï –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è -->
        <div id="confirmRevealModal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>–†–∞—Å–∫—Ä—ã—Ç–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>
                <p>–í—ã —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç–µ:</p>
                <div class="reveal-confirmation">
                    <strong id="confirmCharacteristicName"></strong>: <span id="confirmCharacteristicValue"></span>
                </div>
                <div class="reveal-progress" id="revealProgress">
                    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è -->
                </div>
                <div class="modal-actions">
                    <button onclick="confirmReveal()" class="room-btn confirm-btn">‚úÖ –†–∞—Å–∫—Ä—ã—Ç—å</button>
                    <button onclick="cancelReveal()" class="room-btn secondary">‚ùå –û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <div id="notificationModal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3 id="notificationTitle">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</h3>
                <p id="notificationMessage"></p>
                <button onclick="closeNotificationModal()" class="room-btn">–û–ö</button>
            </div>
        </div>

        <!-- –î–æ–±–∞–≤–ª—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∫–∞—Ä—Ç –¥–µ–π—Å—Ç–≤–∏–π –ø–æ—Å–ª–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω -->
        <div id="actionCardModal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>üéØ –ö–∞—Ä—Ç–∞ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                <div class="action-card-display">
                    <div class="action-card-name" id="actionCardName"></div>
                    <div class="action-card-description" id="actionCardDescription"></div>
                    <div class="action-card-uses" id="actionCardUses"></div>
                </div>
                <div class="modal-actions">
                    <button onclick="useActionCard()" class="room-btn confirm-btn" id="useActionCardBtn">
                        ‚ú® –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
                    </button>
                    <button onclick="closeActionCardModal()" class="room-btn secondary">
                        ‚ùå –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
</body>
</html>